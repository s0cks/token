{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Token REST Api",
    "description": "~ TBD ~"
  },
  "host": "localhost:8081",
  "basePath": "/",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/chain": {
      "get": {
        "summary": "Get the list of blocks in the ledger",
        "responses": {
          "200": {
            "description": "The list of blocks in the ledger.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/HashList"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/InternalServerError"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/chain/head": {
      "get": {
        "summary": "Returns the <HEAD> (top) block for the ledger.",
        "responses": {
          "200": {
            "description": "The <HEAD> block was found.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/Block"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/chain/data/:hash": {
      "get": {
        "summary": "Get the block data from the ledger",
        "parameters": [
          { "$ref": "#/parameters/Hash" }
        ],
        "responses": {
          "200": {
            "description": "The block was found.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/Block"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/wallet/:user": {
      "get": {
        "summary": "Returns the wallet for the user specified.",
        "parameters": [
          { "$ref": "#/parameters/User" }
        ],
        "responses": {
          "200": {
            "description": "The requested wallet was found.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/HashList"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/wallet/:user/spend": {
      "post": {
        "summary": "Spend a token from a user's wallet.",
        "parameters": [
          { "$ref": "#/parameters/User" },
          {
            "in": "body",
            "name": "SpendRequest",
            "schema": {
              "type": "object",
              "required": [
                "inputs",
                "outputs"
              ],
              "properties": {
                "inputs": {
                  "$ref": "#/definitions/HashList"
                },
                "outputs": {
                  "$ref": "#/definitions/OutputList"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The request was successful.",
            "schema": {
              
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/wallet/:user/tokens/:hash": {
      "get": {
        "summary": "Returns the QR for the token specified.",
        "parameters": [
          { "$ref":  "#/parameters/User" },
          { "$ref":  "#/parameters/Hash" }
        ],
        "responses": {
          "200": {
            "description": "The QR for the token."
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/blocks": {
      "get": {
        "summary": "Returns the current blocks that are in the object pool.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The list of blocks in the object pool.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/HashList"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/blocks/data/:hash": {
      "get": {
        "summary": "Returns the block in the object pool by hash",
        "parameters": [
          { "$ref": "#/parameters/Hash" }
        ],
        "responses": {
          "200": {
            "description": "The requested block was found.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/Block"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/transactions": {
      "get": {
        "summary": "Returns the list of transactions in the object pool.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The list of transactions in the object pool.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/HashList"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/transactions/data/:hash": {
      "get": {
        "summary": "Returns the transaction in the object pool.",
        "parameters": [],
        "responses": {
          "200": {
            "description": "The transaction object was found.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/Transaction"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/utxos": {
      "get": {
        "summary": "Returns the list of unclaimed transactions in the object pool.",
        "responses": {
          "200": {
            "description": "The list of unclaimed transactions in the object pool.",
            "schema": {
              "type": "object",
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "$ref": "#/definitions/HashList"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    },
    "/pool/utxos/:hash": {
      "get": {
        "summary": "Returns the unclaimed transaction in the object pool.",
        "parameters": [
          { "$ref": "#/parameters/Hash" }
        ],
        "responses": {
          "200": {
            "description": "The unclaimed transaction was found.",
            "schema": {
              "required": [
                "data"
              ],
              "properties": {
                "data": {
                  "description": "The unclaimed transaction requested.",
                  "$ref": "#/definitions/UnclaimedTransaction"
                }
              }
            }
          },
          "204": {
            "$ref": "#/responses/NoContent"
          },
          "500": {
            "$ref": "#/responses/InternalServerError"
          }
        }
      }
    }
  },
  "parameters": {
    "Hash": {
      "name": "hash",
      "type": "string",
      "in": "path",
      "required": true,
      "description": "The hash of an object"
    },
    "User": {
      "name": "user",
      "type": "string",
      "in": "path",
      "required": true,
      "description": "The ID of the user."
    }
  },
  "responses": {
    "NoContent": {
      "description": "The requested data wasn't found.",
      "schema": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "$ref": "#/definitions/Error"
          }
        }
      }
    },
    "NotFound": {
      "description": "The requested object wasn't found.",
      "schema": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "$ref": "#/definitions/Error"
          }
        }
      }
    },
    "InternalServerError": {
      "description": "An error has occurred that the server doesn't know how to handle.",
      "schema": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "$ref": "#/definitions/Error"
          }
        }
      }
    }
  },
  "definitions": {
    "Error": {
      "type": "object",
      "description": "An error.",
      "required": [
        "message",
        "code"
      ],
      "properties": {
        "message": {
          "type": "string",
          "description": "The error message.",
          "example": "An error has occurred."
        },
        "code": {
          "type": "number",
          "description": "The error code.",
          "example": 404
        }
      }
    },
    "Type": {
      "type": "string",
      "enum": [ "Transaction", "Block", "UnclaimedTransaction" ],
      "description": "The type of object, usually associated w/ a Hash object"
    },
    "Hash": {
      "type": "string",
      "description": "A hash of an object.",
      "example": ""
    },
    "HashList": {
      "type": "array",
      "description": "A list of object hashes.",
      "items": {
        "$ref": "#/definitions/Hash"
      }
    },
    "UserId": {
      "type": "string",
      "description": "The ID of a user.",
      "example": ""
    },
    "ProductId": {
      "type": "string",
      "description": "An ID for a product.",
      "example": ""
    },
    "User": {
      "type": "object",
      "description": "Represents a user of the token ledger",
      "required": [
        "name", "email", "tokens"
      ],
      "properties": {
        "name": {
          "description": "The human readable name of the User",
          "type": "string"
        },
        "email": {
          "description": "The email for the User",
          "type": "string"
        },
        "tokens": {
          "description": "The list of tokens that the User owns in the ledger",
          "type": "array",
          "items": {
            "$ref": "#/definitions/Hash"
          }
        }
      }
    },
    "Block": {
      "type": "object",
      "description": "An object representing a summary of a block in the ledger",
      "required": [
        "Height",
        "Hash",
        "PreviousHash",
        "MerkleRoot"
      ],
      "properties": {
        "Height": {
          "type": "number",
          "description": "The index of (or height of) the Block in the BlockChain"
        },
        "Hash": {
          "$ref": "#/definitions/Hash",
          "description": "The hash of the block"
        },
        "PreviousHash": {
          "description": "The hash of the previous block in the block chain",
          "$ref": "#/definitions/Hash"
        },
        "MerkleRoot": {
          "$ref": "#/definitions/Hash",
          "description": "The merkle root hash of the block"
        }
      }
    },
    "Input": {
      "type": "object",
      "description": "An input to a transaction, represents an old UnclaimedTransaction in the unclaimed transaction pool",
      "required": [
        "Transaction",
        "Index",
        "User"
      ],
      "properties": {
        "Transaction": {
          "$ref": "#/definitions/Hash",
          "description": "The hash of the transaction that this input is referring to"
        },
        "Index": {
          "type": "number",
          "description": "The output index in the transaction"
        },
        "User": {
          "type": "string",
          "description": "The id of the user that owns this Input"
        }
      }
    },
    "Output": {
      "type": "object",
      "description": "An output to a transaction, used to create a new UnclaimedTransaction in the unclaimed transaction pool",
      "required": [
        "user",
        "product"
      ],
      "properties": {
        "user": {
          "description": "The user that this output is for.",
          "$ref": "#/definitions/UserId"
        },
        "product": {
          "description": "The product that this output is for.",
          "$ref": "#/definitions/ProductId"
        }
      }
    },
    "OutputList": {
      "type": "array",
      "description": "A list of Output objects.",
      "items": {
        "$ref": "#/definitions/Output"
      }
    },
    "Transaction": {
      "type": "object",
      "description": "A transaction, used to record the transfer of tokens from one user to another at a point in time",
      "required": [
        "Timestamp",
        "Index",
        "Inputs",
        "Outputs",
        "Signature"
      ],
      "properties": {
        "Timestamp": {
          "type": "number",
          "description": "The timestamp that this transaction was generated at"
        },
        "Index": {
          "type": "number",
          "description": "The the index in the block that this transaction lives"
        },
        "Inputs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Input"
          },
          "description": "The list of inputs for the transaction"
        },
        "Outputs": {
          "type": "array",
          "items": {

          },
          "description": "The list of outputs for the transaction"
        },
        "Signature": {
          "type": "string",
          "description": "The signature of the transaction generated by the transaction creator"
        }
      }
    },
    "UnclaimedTransaction": {
      "type": "object",
      "description": "An unclaimed transaction, represents an unspent transaction that can be spent",
      "required": [
        ""
      ],
      "properties": {

      }
    }
  }
}